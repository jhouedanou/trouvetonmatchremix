{"file":"inscription-CxDuTd5h.js","mappings":";;;;;;;;;;;;;;;;;;;AAAuD,MAAe,aAAA,gBAAgB,oBAAoB;ACAnD,MAAe,aAAA,gBAAgB,mBAAmB;;;;;;;;;ACkC1F,cAAS;AACxB,UAAM,eAAe,IAAI,IAAI;AAC7B,UAAMA,aAAY,IAAI,cAAc,SAAe;AAEnD,UAAM,WAAW,IAAI;AAAA,MACnB,WAAW;AAAA,MACX,UAAU;AAAA,MACV,OAAO;AAAA,MACP,OAAO;AAAA,MACP,UAAU;AAAA,MACV,QAAQ;AAAA,MACR,OAAO;AAAA,MACP,OAAO;AAAA,MACP,OAAO;AAAA,IACT,CAAC;AAWoB,aAAS,MAAM;AAClC,aAAO,GAAG,SAAS,MAAM,SAAS,IAAI,SAAS,MAAM,QAAQ;AAAA,IAC/D,CAAC;;;;;;;;;;;;;;;;;;;;;;;","names":["quartiers"],"sources":["../../../../virtual:public?%2Fimg%2Flogobiere.png","../../../../virtual:public?%2Fimg%2Flogosoda.png","../../../../pages/inscription.vue"],"sourcesContent":["import { publicAssetsURL } from '#internal/nuxt/paths';export default publicAssetsURL(\"/img/logobiere.png\")","import { publicAssetsURL } from '#internal/nuxt/paths';export default publicAssetsURL(\"/img/logosoda.png\")","<script setup>\nimport { ref, computed, onMounted } from \"vue\";\nimport { useRouter } from \"vue-router\";\nimport quartiersData from \"@/data/quartiers.json\";\nimport { supabase } from \"~/utils/supabase\";\n\n//envoi à supase\n\nconst handleSubmit = async () => {\n  const { data, error } = await supabase\n    .from('users')\n    .insert([\n      {\n        first_name: formData.value.firstName,\n        last_name: formData.value.lastName,\n        email: formData.value.email,\n        phone: formData.value.phone,\n        quartier: formData.value.quartier,\n        gender: formData.value.gender,\n        photo: formData.value.photo,\n        team: formData.value.team,\n      }\n    ])\n    .select()\n\n  if (error?.code === '23505') {\n    alert('Vous êtes déjà inscrit dans notre base de données')\n    return\n  }\n\n  if (data) {\n    router.push(`/choix-boisson/${data[0].id}`)\n  }\n}// Initialisation immédiate des refs\nconst router = useRouter();\nconst previewImage = ref(null);\nconst quartiers = ref(quartiersData.quartiers || []);\n\nconst formData = ref({\n  firstName: \"\",\n  lastName: \"\",\n  email: \"\",\n  phone: \"\",\n  quartier: \"\",\n  gender: \"\",\n  photo: null,\n  team1: false,\n  team2: false,\n});\n\n// Gestion du rafraîchissement\nonMounted(() => {\n  // Récupération des données du localStorage si elles existent\n  const savedData = localStorage.getItem(\"formData\");\n  if (savedData) {\n    formData.value = JSON.parse(savedData);\n  }\n});\n\nconst userFullName = computed(() => {\n  return `${formData.value.firstName} ${formData.value.lastName}`;\n});\n\nconst MAX_FILE_SIZE = 2 * 1024 * 1024; // 2Mo en bytes\nconst ALLOWED_TYPES = [\"image/jpeg\", \"image/png\"];\n\nconst handleImageUpload = (event) => {\n  const file = event.target.files[0];\n\n  if (!file) return;\n\n  // Vérification du type de fichier\n  if (!ALLOWED_TYPES.includes(file.type)) {\n    alert(\"Format invalide. Utilisez uniquement JPG ou PNG\");\n    event.target.value = \"\";\n    return;\n  }\n\n  // Vérification de la taille\n  if (file.size > MAX_FILE_SIZE) {\n    alert(\"Image trop volumineuse. Maximum 2Mo\");\n    event.target.value = \"\";\n    return;\n  }\n\n  const reader = new FileReader();\n  reader.onload = (e) => {\n    previewImage.value = e.target.result;\n    formData.value.photo = e.target.result;\n  };\n  reader.readAsDataURL(file);\n};\n</script>\n\n<template>\n  <section class=\"section\">\n    <div class=\"container\">\n      <div class=\"columns\">\n        <div class=\"column\">\n          <div class=\"p-4\">\n            <form @submit.prevent=\"handleSubmit\" class=\"box\">\n              <div class=\"columns\">\n                <div class=\"column is-4\">\n                  <figure class=\"image\">\n                    <img\n                      id=\"blenheim\"\n                      :src=\"previewImage\"\n                      alt=\"Photo de profil\"\n                      v-if=\"previewImage\"\n                    />\n                  </figure>\n                  <div class=\"field m-2\">\n                    <label class=\"label\">Photo</label>\n                    <div class=\"file\">\n                      <label class=\"file-label\">\n                        <input\n                          class=\"file-input\"\n                          type=\"file\"\n                          @change=\"handleImageUpload\"\n                          accept=\"image/*\"\n                          capture=\"user\"\n                        />\n                        <span class=\"file-cta\">\n                          <span class=\"file-label\">Choisir une photo</span>\n                        </span>\n                      </label>\n                    </div>\n                  </div>\n                </div>\n\n                <div class=\"column is-8\">\n                  <div class=\"field m-2\">\n                    <label class=\"label\">Prénom</label>\n                    <div class=\"control\">\n                      <input\n                        class=\"input\"\n                        type=\"text\"\n                        v-model=\"formData.firstName\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                  <div class=\"field m-2\">\n                    <label class=\"label\">Nom</label>\n                    <div class=\"control\">\n                      <input\n                        class=\"input\"\n                        type=\"text\"\n                        v-model=\"formData.lastName\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                  <div class=\"field m-2\">\n                    <label class=\"label\">Email</label>\n                    <div class=\"control\">\n                      <input\n                        class=\"input\"\n                        type=\"email\"\n                        v-model=\"formData.email\"\n                        required\n                      />\n                    </div>\n                  </div>\n\n                  <div class=\"field m-2\">\n                    <label class=\"label\">Genre</label>\n                    <div class=\"control gender-group\">\n                      <label class=\"radio mr-4\">\n                        <input\n                          type=\"radio\"\n                          v-model=\"formData.gender\"\n                          value=\"homme\"\n                        />\n                        Homme\n                      </label>\n                      <label class=\"radio mr-4\">\n                        <input\n                          type=\"radio\"\n                          v-model=\"formData.gender\"\n                          value=\"femme\"\n                        />\n                        Femme\n                      </label>\n                    </div>\n                  </div>\n\n                  <div class=\"field m-2\">\n                    <label class=\"label\">Téléphone</label>\n                    <div class=\"control\">\n                      <input\n                        class=\"input\"\n                        type=\"tel\"\n                        v-model=\"formData.phone\"\n                        required\n                        pattern=\"[0-9]{10}\"\n                        placeholder=\"XX XX XX XX XX\"\n                      />\n                    </div>\n                  </div>\n\n                  <div class=\"field m-2\">\n                    <label class=\"label\">Quartier d'Abidjan</label>\n                    <div class=\"control\">\n                      <div class=\"select is-fullwidth\">\n                        <select v-model=\"formData.quartier\" required>\n                          <option value=\"\">Sélectionnez un quartier</option>\n                          <option\n                            v-for=\"quartier in quartiers\"\n                            :key=\"quartier.id\"\n                            :value=\"quartier.nom\"\n                          >\n                            {{ quartier.nom }}\n                          </option>\n                        </select>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div class=\"field m-2\">\n                    <label class=\"label\">Équipe</label>\n                    <div class=\"control\">\n                      <label class=\"radio mr-4\">\n                        <input\n                          type=\"radio\"\n                          v-model=\"formData.team\"\n                          value=\"biere\"\n                        />\n                        <img src=\"/img/logobiere.png\" alt=\"\" />\n                      </label>\n                      <label class=\"radio\">\n                        <input\n                          type=\"radio\"\n                          v-model=\"formData.team\"\n                          value=\"soda\"\n                        />\n                        <img src=\"/img/logosoda.png\" alt=\"\" />\n                      </label>\n                    </div>\n                  </div>\n\n                  <div class=\"field m-2 mt-5\">\n                    <div class=\"control\">\n                      <button class=\"button is-fullwidth\" type=\"submit\">\n                        S'inscrire\n                      </button>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </form>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<style scoped>\n.image {\n  max-width: 300px;\n  margin: 0 auto;\n  margin-bottom: 1rem;\n}\n\n.image img {\n  border-radius: 8px;\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);\n}\n\n.file {\n  margin-top: 1rem;\n  display: flex;\n  justify-content: center;\n}\n\n.box {\n  background-color: rgba(255, 255, 255, 0.7);\n  border-radius: 15px;\n  padding: 2rem;\n}\n\n.field {\n  margin-bottom: 1.5rem;\n}\n\n.label {\n  color: #c40e0e !important;\n  font-weight: bold;\n  margin-bottom: 0.5rem;\n}\n\n.input,\n.select select {\n  border-radius: 8px;\n  border: 1px solid #dbdbdb;\n}\n\n.gender-group {\n  display: flex;\n  align-items: center;\n  gap: 2rem;\n}\n\n.radio,\n.checkbox {\n  color: #c40e0e !important;\n  font-weight: bold;\n  cursor: pointer;\n}\n\n.button.is-primary {\n  background-color: #c40e0e !important;\n  border-radius: 25px;\n  padding: 1.25rem;\n  font-weight: bold;\n  text-transform: uppercase;\n  transition: all 0.3s ease;\n}\n\n.button.is-primary:hover {\n  transform: translateY(-2px);\n  box-shadow: 0 4px 8px rgba(196, 14, 14, 0.2);\n}\n</style>\n"],"version":3}