{"file":"_id_-CsZuuC8q.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;AAgCA,UAAM,QAAQ,SAAQ;AACP,UAAM,OAAO;AAE5B,UAAM,eAAe,IAAI,IAAI;AAC7B,UAAM,WAAW,IAAI,IAAI;AAezB,UAAM,sBAAsB,SAAS,MAAM;AACzC,aAAO,SAAS,UAAU,UAAU,SAAS;AAAA,IAC/C,CAAC;;;;;;;;;;;;;;;;","names":[],"sources":["../../../../pages/choix-boisson/[id].vue"],"sourcesContent":["<template>\n  <section class=\"section\">\n    <div class=\"container\">\n      <div class=\"box\">\n        <h2 class=\"title\">Choisissez votre boisson</h2>\n        \n        <div class=\"columns is-multiline\">\n          <div v-for=\"boisson in boissonsDisponibles\" :key=\"boisson.id\" class=\"column is-3\">\n            <div class=\"card\">\n              <div class=\"card-image\">\n                <figure class=\"image\">\n                  <img :src=\"boisson.image\" :alt=\"boisson.nom\">\n                </figure>\n              </div>\n              <div class=\"card-content\">\n                <label class=\"radio\">\n                  <input type=\"radio\" \n                         v-model=\"choixBoisson\" \n                         :value=\"boisson.id\"\n                         @change=\"handleDrinkChoice(boisson.id)\">\n                  {{ boisson.nom }}\n                </label>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </section>\n</template>\n\n<script setup>\nconst route = useRoute()\nconst userId = route.params.id\n\nconst choixBoisson = ref(null)\nconst userTeam = ref(null)\n\n// Fetch user team preference\nonMounted(async () => {\n  const { data } = await supabase\n    .from('users')\n    .select('team')\n    .eq('id', userId)\n    .single()\n    \n  if (data) {\n    userTeam.value = data.team\n  }\n})\n\nconst boissonsDisponibles = computed(() => {\n  return userTeam.value === 'biere' ? bieres : sodas\n})\n\nconst handleDrinkChoice = async (drinkId) => {\n  const { data } = await supabase\n    .from('user_drinks')\n    .insert([{\n      user_id: userId,\n      drink_choice: drinkId\n    }])\n    .select()\n\n  if (data) {\n    router.push('/confirmation')\n  }\n}\n</script>\n"],"version":3}